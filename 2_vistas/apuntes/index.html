
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>Vistas - IUDM-iOS-basico</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vistas" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="IUDM-iOS-basico" class="md-header__button md-logo" aria-label="IUDM-iOS-basico" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IUDM-iOS-basico
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Vistas
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IUDM-iOS-basico" class="md-nav__button md-logo" aria-label="IUDM-iOS-basico" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    IUDM-iOS-basico
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Vistas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Vistas
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#componentes-de-interfaz-de-usuario" class="md-nav__link">
    Componentes de interfaz de usuario
  </a>
  
    <nav class="md-nav" aria-label="Componentes de interfaz de usuario">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-de-texto" class="md-nav__link">
    Campos de texto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#botones" class="md-nav__link">
    Botones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alertas-y-action-sheets" class="md-nav__link">
    Alertas y action sheets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pickers" class="md-nav__link">
    Pickers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otros-controles-sliders-switches-date-pickers" class="md-nav__link">
    Otros controles (sliders, switches, date pickers)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vistas-en-swift" class="md-nav__link">
    Vistas en Swift
  </a>
  
    <nav class="md-nav" aria-label="Vistas en Swift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#las-vistas-y-el-controller" class="md-nav__link">
    Las vistas y el controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jerarquia-de-vistas" class="md-nav__link">
    Jerarquía de vistas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#propiedades-de-una-vista" class="md-nav__link">
    Propiedades de una vista
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ejercicios/" class="md-nav__link">
        Ejercicios sobre vistas
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../3_autolayout/apuntes/" class="md-nav__link">
        Autolayout
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../4_tablas/apuntes/" class="md-nav__link">
        Tablas
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../4_tablas/ejercicios/" class="md-nav__link">
        Ejercicios de tablas
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../1_controllers/apuntes/" class="md-nav__link">
        Controladores
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../1_controllers/ejercicios/" class="md-nav__link">
        Ejercicios de controladores
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#componentes-de-interfaz-de-usuario" class="md-nav__link">
    Componentes de interfaz de usuario
  </a>
  
    <nav class="md-nav" aria-label="Componentes de interfaz de usuario">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-de-texto" class="md-nav__link">
    Campos de texto
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#botones" class="md-nav__link">
    Botones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alertas-y-action-sheets" class="md-nav__link">
    Alertas y action sheets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pickers" class="md-nav__link">
    Pickers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otros-controles-sliders-switches-date-pickers" class="md-nav__link">
    Otros controles (sliders, switches, date pickers)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vistas-en-swift" class="md-nav__link">
    Vistas en Swift
  </a>
  
    <nav class="md-nav" aria-label="Vistas en Swift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#las-vistas-y-el-controller" class="md-nav__link">
    Las vistas y el controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jerarquia-de-vistas" class="md-nav__link">
    Jerarquía de vistas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#propiedades-de-una-vista" class="md-nav__link">
    Propiedades de una vista
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="vistas">Vistas<a class="headerlink" href="#vistas" title="Permanent link">&para;</a></h1>
<p>Como ya hemos visto, todas las aplicaciones iOS que usan la librería UIKit siguen el paradigma modelo/vista/controlador. En esta sesión vamos a ver las vistas, es decir, los componentes de interfaz de usuario de nuestra aplicación.  </p>
<p>Primero veremos algunos de los componentes más usados de UIKit y luego cómo gestionar las propiedades comunes a todos los componentes (tamaño, posición, etc) con código Swift.</p>
<h2 id="componentes-de-interfaz-de-usuario">Componentes de interfaz de usuario<a class="headerlink" href="#componentes-de-interfaz-de-usuario" title="Permanent link">&para;</a></h2>
<p>A lo largo de los ejemplos que hemos ido haciendo en las sesiones anteriores ya hemos probado unos cuantos de los controles básicos de interfaz de usuario que nos proporciona iOS: botones, etiquetas, imágenes, … Vamos a ver aquí algunas de las características de los controles, aunque solo vamos a dar unas pinceladas, ya que una descripción exhaustiva de cada propiedad sería imposible y tediosa. </p>
<p>Se os recomienda consultar la documentación de Apple, en concreto hay dos tipos de documentación que os pueden resultar útiles:</p>
<ul>
<li>Desde el punto de vista del diseño y la usabilidad, la parte de las Human Interface Guidelines dedicada a los <a href="https://developer.apple.com/design/human-interface-guidelines/components/all-components/">componentes de UI</a>.</li>
<li>Desde el punto de vista de desarrollo podéis consultar el apartado <a href="https://developer.apple.com/documentation/uikit/views_and_controls">"views and controls"</a> de la <a href="https://developer.apple.com/documentation/uikit">documentación de UIKit</a>, con la referencia del API y la forma de usar cada componente en nuestro código.</li>
</ul>
<blockquote>
<p>Aunque aquí hablemos de controles indistintamente para referirnos a las etiquetas, botones, … en realidad este término tiene un significado más preciso en iOS. La clase <code>UIControl</code> es de la que heredan los controles más “interactivos” como los botones, mientras que las etiquetas lo hacen de <code>UIView</code> (no obstante todos los<code>UIControl</code> son también vistas ya que a su vez esta clase hereda de <code>UIView</code>).</p>
</blockquote>
<h3 id="campos-de-texto">Campos de texto<a class="headerlink" href="#campos-de-texto" title="Permanent link">&para;</a></h3>
<p>Un campo de texto nos proporciona un espacio donde el usuario puede introducir y editar texto. Se define en la clase <code>UITextField</code>, y pertenece a un grupo de vistas denominados controles, junto a otros componentes como por ejemplo los botones. Esto es así porque permiten al usuario interactuar con la aplicación. No heredan directamente de <code>UIView</code>, sino de su subclase <code>UIControl</code>, que incorpora los métodos para tratar eventos de la interfaz mediante el patrón <em>target-action</em> como hemos visto anteriormente.</p>
<blockquote>
<p><em>target-action</em> es el nombre genérico que se da en iOS a la idea de vincular un componente de UI con un manejador de evento. Ya hemos visto cómo se hace en Xcode (arrastrar+Ctrl desde el componente en el <em>storyboard</em> hasta el código del <em>controller</em>). También se puede hacer en código Swift, aunque no lo veremos aquí.</p>
</blockquote>
<p>Sus propiedades se pueden encontrar en la sección <code>Text Field</code> del inspector de atributos. Podremos especificar un texto por defecto (<code>Text</code>), o bien un texto a mostrar sombreado en caso de que el usuario no haya introducido nada (<code>Placeholder Text</code>). Esto será útil por ejemplo para dar una pista al usuario sobre lo que debe introducir en dicho campo.</p>
<p>Si nos fijamos en el inspector de conexiones del campos de texto, veremos la lista de eventos que podemos conectar a nuestras acciones. Esta lista de eventos es común para cualquier control. En el caso de un campo de texto por ejemplo nos puede interesar el evento <code>Value Changed</code>.</p>
<h4 id="teclado-en-pantalla">Teclado en pantalla<a class="headerlink" href="#teclado-en-pantalla" title="Permanent link">&para;</a></h4>
<p>Cuando un campo de texto adquiere el foco porque el usuario hace <em>tap</em> sobre él, automáticamente aparece el teclado software <em>on screen</em>. El problema es que no desaparece por defecto. Tenemos que quitarlo de pantalla con código Swift. En concreto, tenemos que escribir un <em>action</em> que responda al evento <code>Did end on exit</code> del campo de texto. </p>
<blockquote>
<p>Cuando crees el <em>action</em> indica en el menú <em>popup</em> que el <code>type</code> debe ser <code>UITextField</code>. Esta opción es el parámetro que se le pasará al <em>action</em> y representa el objeto que ha disparado el evento, en nuestro caso el campo de texto. Si lo pasamos como <code>AnyObject</code> no tendremos acceso a los métodos del API de <code>UITextField</code> (salvo que hiciéramos una conversión con <code>as</code>)</p>
</blockquote>
<p>En teoría dentro de este <em>action</em> debemos hacer que el campo deje de ser el objeto que hace de <em>first responder</em> para que el teclado deje de mostrarse</p>
<blockquote>
<p>El <em>first responder</em> es el objeto que recibe en primer lugar ciertas clases de eventos, por ejemplo los de teclado o movimiento. Cuando hacemos <em>tap</em> sobre un campo de texto, iOS hace que este pase a ser el <em>first responder</em>, y esto es lo que hace que automáticamente aparezca el teclado <em>onscreen</em>.</p>
</blockquote>
<div class="highlight"><pre><span></span><code> <span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">introPulsado</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="bp">UITextField</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">sender</span><span class="p">.</span><span class="n">resignFirstResponder</span><span class="p">()</span>
 <span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Aunque en muchas fuentes (libros, tutoriales en web, …) aparece el método del <code>resignFirstResponder</code>, curiosamente <em>parece bastar con tener un action que responda al <code>Did end on exit</code>, aunque no haga nada</em> para ocultar el teclado.*</p>
</blockquote>
<p>Por desgracia, no todos los tipos de teclado en pantalla tienen un botón de “intro” y por tanto no disparan el evento <code>Did end on exit</code>, por ejemplo el teclado numérico no lo hace. En ese caso hay que usar una solución algo más rebuscada. Por ejemplo, es muy típico que al pulsar sobre cualquier parte de la pantalla que no sea el campo el teclado se oculte. Esto podemos conseguirlo detectando el evento de toque sobre la vista. Si un evento no se procesa en los componentes de la vista va “subiendo” en la jerarquía hasta llegar al <em>view controller</em>, por lo que en él podríamos hacer esto (no es necesario crear un <em>action</em>, ya que el evento no va a ir directamente al <em>controller</em>, solo escribir el código):</p>
<div class="highlight"><pre><span></span><code><span class="kr">override</span> <span class="kd">func</span> <span class="nf">touchesEnded</span><span class="p">(</span><span class="kc">_</span> <span class="n">touches</span><span class="p">:</span> <span class="n">Set</span><span class="p">&lt;</span><span class="bp">UITouch</span><span class="p">&gt;,</span> <span class="n">with</span><span class="p">:</span> <span class="bp">UIEvent</span><span class="p">?)</span> <span class="p">{</span>
   <span class="bp">print</span><span class="p">(</span><span class="s">&quot;¡touch en la pantalla!&quot;</span><span class="p">)</span>
   <span class="c1">//Necesitamos un outlet para acceder al campo de texto.</span>
   <span class="c1">//Aquí suponemos que lo hemos llamado &quot;campoDeTexto&quot;</span>
   <span class="kc">self</span><span class="p">.</span><span class="n">campoDeTexto</span><span class="p">.</span><span class="n">resignFirstResponder</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="botones">Botones<a class="headerlink" href="#botones" title="Permanent link">&para;</a></h3>
<p>Al igual que los campos de texto, los botones son otro tipo de control (heredan de <code>UIControl</code>). Se definen en la clase <code>UIButton</code>, que puede ser inicializada de la misma forma que el resto de vistas.</p>
<p>Si nos fijamos en el inspector de atributos de un botón (en la sección <code>Button</code>), vemos que podemos elegir el tipo de botón (atributo <code>Type</code>). Podemos seleccionar una serie de estilos prefedinidos para los botones, o bien darle un estilo propio (<code>Custom</code>).</p>
<p>El texto que aparece en el botón se especifica en la propiedad <code>Title</code>, y podemos configurar también su color, sombreado, o añadir una imagen como icono.</p>
<p>En el inspector de conexiones, el evento que utilizaremos más comúnmente en los botones es <code>Touch Up Inside</code>, que se producirá cuando levantemos el dedo tras pulsar dentro del botón. Este será el momento en el que se realizará la acción asociada al botón.</p>
<h3 id="alertas-y-action-sheets">Alertas y <em>action sheets</em><a class="headerlink" href="#alertas-y-action-sheets" title="Permanent link">&para;</a></h3>
<p>Son cuadros de diálogo modales que se usan para informar al usuario de eventos importantes. No se crean gráficamente en Xcode sino por código Pueden simplemente informar de algo o además pedir al usuario que elija uno entre varios cursos de acción.</p>
<p>Vamos a ver primero cómo crear una <em>alerta</em>. En realidad el API para <em>alertas</em> y <em>action sheets</em> es el mismo, solo se diferencian en una constante que se le pasa al inicializador. Luego veremos las diferencias en cuanto a su significado de cara al usuario.</p>
<p>Por ejemplo veamos cómo se mostraría una alerta con dos opciones</p>
<p><img alt="" src="../images/alert_2_opciones.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1">//El alert en sí. Vemos que el preferredStyle es .alert</span>
<span class="kd">let</span> <span class="nv">alert</span> <span class="p">=</span> <span class="bp">UIAlertController</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;¡Elige!&quot;</span><span class="p">,</span> 
            <span class="n">message</span><span class="p">:</span> <span class="s">&quot;Tienes que elegir uno de estos dos&quot;</span><span class="p">,</span> 
            <span class="n">preferredStyle</span><span class="p">:</span> <span class="p">.</span><span class="n">alert</span><span class="p">)</span>
<span class="c1">//cada opción es un UIAlertAction</span>
<span class="kd">let</span> <span class="nv">susto</span> <span class="p">=</span> <span class="bp">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Susto&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="n">cancel</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">action</span> <span class="k">in</span>
      <span class="bp">print</span><span class="p">(</span><span class="s">&quot;BU!!! haber elegido muerte!&quot;</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">muerte</span> <span class="p">=</span> <span class="bp">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Muerte&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">action</span> <span class="k">in</span>
      <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Aquí se acaba todo&quot;</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">//Añadimos las opciones al cuadro de diálogo</span>
<span class="n">alert</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">susto</span><span class="p">)</span>
<span class="n">alert</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">muerte</span><span class="p">)</span>
<span class="c1">//Mostramos el alert con present, como se hace con cualquier controller</span>
<span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Ha acabado la animación del alert&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Podemos tener el número de botones que queramos. No obstante, las “iOS Human Interface Guidelines” <a href="https://developer.apple.com/ios/human-interface-guidelines/ui-views/alerts/">recomiendan como máximo dos</a>, y en caso que necesitemos más usar un <em>“Action Sheet”</em>.</p>
</blockquote>
<p>Por otro lado un <em>action sheet</em> es un cuadro de diálogo que se usa para dar alternativas al usuario cuando ha realizado una acción. Por ejemplo supongamos un gestor de email en el que el usuario ha hecho <em>tap</em> sobre un mensaje. Podría aparecer la siguiente <em>action sheet</em></p>
<p><img alt="" src="../images/action_sheet.png" /></p>
<p>El API es exactamente el mismo, solo que en el inicializador de <code>UIAlertController</code> se pasa como parámetro <code>preferredStyle</code> el valor <code>actionSheet</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">actionSheet</span> <span class="p">=</span> <span class="bp">UIAlertController</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Opciones&quot;</span><span class="p">,</span> 
    <span class="n">message</span><span class="p">:</span> <span class="s">&quot;Seleccione la opción&quot;</span><span class="p">,</span> 
    <span class="n">preferredStyle</span><span class="p">:</span> <span class="p">.</span><span class="n">actionSheet</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">archivar</span> <span class="p">=</span> <span class="bp">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Archivar&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">){</span>
            <span class="n">action</span> <span class="k">in</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Aquí se archivaría el mensaje&quot;</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nv">eliminar</span> <span class="p">=</span> <span class="bp">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Eliminar&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="n">destructive</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">action</span> <span class="k">in</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Aquí se eliminaría el mensaje&quot;</span><span class="p">)</span>
        <span class="p">}</span>
<span class="kd">let</span> <span class="nv">cancelar</span> <span class="p">=</span> <span class="bp">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s">&quot;Cancelar&quot;</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="n">cancel</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">action</span> <span class="k">in</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Aquí no se haría nada&quot;</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">actionSheet</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">archivar</span><span class="p">)</span>
<span class="n">actionSheet</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">eliminar</span><span class="p">)</span>
<span class="n">actionSheet</span><span class="p">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">cancelar</span><span class="p">)</span>
<span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">actionSheet</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
   <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Ha acabado la animación del action sheet&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="pickers">Pickers<a class="headerlink" href="#pickers" title="Permanent link">&para;</a></h3>
<p>Nos permiten elegir uno de entre una lista de valores, usando la metáfora visual de la típica rueda que se gira para seleccionar el valor deseado. En el API se corresponden con la clase <a href="https://developer.apple.com/documentation/uikit/uipickerview"><code>UIPickerView</code></a>. En Xcode, el componente a arrastrar al <em>storyboard</em> es el "Picker View"</p>
<p><img alt="" src="../images/picker.png" /></p>
<p>Comparados con la mayoría de los otros controles son bastante más complejos, ya que un <em>picker</em> necesita de la ayuda de dos <em>delegates</em> (dos objetos que sean conformes a ciertos protocolos): </p>
<ul>
<li>Un <em>delegate</em> (protocolo <code>UIPickerViewDelegate</code>): gestiona el comportamiento general del picker</li>
<li>Un <em>datasource</em> (protocolo <code>UIPickerViewDataSource</code>): gestiona el "modelo de datos": cuántas filas y columnas tiene</li>
</ul>
<p>Estos dos protocolos heredan de <code>NSObjectProtocol</code>, con lo que los objetos conformes a ellos deben ser conformes también a este último (esto se puede conseguir de modo sencillo haciendo que la clase herede de <code>NSObject</code>, ya que esta clase es conforme a este protocolo).</p>
<p>Por ejemplo supongamos una clase <code>GestorPicker</code> que para hacer el código más compacto va a hacer tanto de <em>delegate</em> como de <em>datasource</em>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">import</span> <span class="nc">UIKit</span>
<span class="kd">class</span> <span class="nc">GestorPicker</span> <span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="bp">UIPickerViewDelegate</span><span class="p">,</span> <span class="bp">UIPickerViewDataSource</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">lista</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;Pepe&quot;</span><span class="p">,</span> <span class="s">&quot;Eva&quot;</span><span class="p">,</span> <span class="s">&quot;Juan&quot;</span><span class="p">,</span> <span class="s">&quot;María&quot;</span><span class="p">]</span>

    <span class="c1">//METODOS DE UIPickerViewDatasource</span>
    <span class="c1">//número de &quot;columnas&quot; del Picker</span>
    <span class="kd">func</span> <span class="nf">numberOfComponents</span><span class="p">(</span><span class="k">in</span> <span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="c1">//número de &quot;filas&quot;</span>
    <span class="kd">func</span> <span class="nf">pickerView</span><span class="p">(</span><span class="kc">_</span> <span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">,</span> <span class="n">numberOfRowsInComponent</span> <span class="n">component</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">lista</span><span class="p">.</span><span class="bp">count</span>
    <span class="p">}</span>

    <span class="c1">//METODOS DE UIPickerViewDelegate</span>
    <span class="kd">func</span> <span class="nf">pickerView</span><span class="p">(</span><span class="kc">_</span> <span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">,</span> <span class="n">titleForRow</span> <span class="n">row</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">forComponent</span> <span class="n">component</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">lista</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>
    <span class="p">}</span>   
<span class="p">}</span>
</code></pre></div>
<p>En el <em>view controller</em> de la pantalla con el <em>picker</em> definiríamos una instancia de <code>GestorPicker</code></p>
<p><div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nv">gestorPicker</span> <span class="p">=</span> <span class="n">GestorPicker</span><span class="p">()</span>
</code></pre></div>
Crearíamos un <em>outlet</em> que represente al <em>picker</em> con Ctrl+Arrastrar, que generaría algo así en el código</p>
<p><div class="highlight"><pre><span></span><code><span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">miPicker</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">!</span> 
</code></pre></div>
Y finalmente dentro del <code>viewDidLoad</code> "enlazaríamos" el <em>picker</em> con su <em>datasource</em> y su <em>delegate</em> asignándolos a sus propiedades del mismo nombre. Recordemos que <em>datasource</em> y <em>delegate</em> en este caso son el mismo objeto.</p>
<div class="highlight"><pre><span></span><code><span class="kc">self</span><span class="p">.</span><span class="n">miPicker</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">gestorPicker</span>
<span class="kc">self</span><span class="p">.</span><span class="n">miPicker</span><span class="p">.</span><span class="n">dataSource</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">gestorPicker</span>
</code></pre></div>
<p>Los métodos anteriores nos permiten pintar el <em>picker</em>, pero además nos interesará saber qué opción está seleccionada. En cualquier momento podemos obtener el número de fila seleccionado en el <em>picker</em> con</p>
<div class="highlight"><pre><span></span><code><span class="c1">//Cambiar el 0 por la &quot;columna&quot; que queramos</span>
<span class="kc">self</span><span class="p">.</span><span class="n">miPicker</span><span class="p">.</span><span class="n">selectedRow</span><span class="p">(</span><span class="n">inComponent</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>Además si nos interesa podemos ser avisados en el momento en que el usuario seleccione una opción. Cuando se produzca ese evento, el objeto que actúe de <em>delegate</em> del <em>picker</em> recibirá una llamada a su método <code>pickerView(_:,didSelectRow:,inComponent:)</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">GestorPicker</span> <span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="bp">UIPickerViewDelegate</span><span class="p">,</span> <span class="bp">UIPickerViewDataSource</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">lista</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;Pepe&quot;</span><span class="p">,</span> <span class="s">&quot;Eva&quot;</span><span class="p">,</span> <span class="s">&quot;Juan&quot;</span><span class="p">,</span> <span class="s">&quot;María&quot;</span><span class="p">]</span>
    <span class="p">...</span>
    <span class="kd">func</span> <span class="nf">pickerView</span><span class="p">(</span><span class="kc">_</span> <span class="n">pickerView</span><span class="p">:</span> <span class="bp">UIPickerView</span><span class="p">,</span> <span class="n">didSelectRow</span> <span class="n">row</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">inComponent</span> <span class="n">component</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Seleccionada fila: </span><span class="si">\(</span><span class="n">row</span><span class="si">)</span><span class="s">, dato: </span><span class="si">\(</span><span class="n">lista</span><span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="otros-controles-sliders-switches-date-pickers">Otros controles (<em>sliders</em>, <em>switches</em>, <em>date pickers</em>)<a class="headerlink" href="#otros-controles-sliders-switches-date-pickers" title="Permanent link">&para;</a></h3>
<p>Estos controles son muy heterogéneos, pero todos tienen en común que tienen un valor asociado y que este valor puede cambiar debido a las acciones del usuario. El tipo del valor y la(s) propiedade(s) para acceder a él serán muy distintas según el tipo de control, por ejemplo:</p>
<ul>
<li>Un <code>UISwitch</code> es booleano y se sabe si está a "on" con <code>isOn</code></li>
<li>Un <code>UISlider</code> tiene un valor <code>Float</code> y se accede a él con la propiedad <code>value</code></li>
<li>Un <code>UIDatePicker</code> tiene una fecha y se accede a ella con la propiedad <code>date</code></li>
</ul>
<p>Pero en todos se usa la misma idea, implementar un <em>action</em> vinculado al evento de cambio del valor de modo que en su código podamos acceder al valor actual. Por ejemplo para un <em>slider</em> tendríamos algo como</p>
<div class="highlight"><pre><span></span><code><span class="c1">//Este método se ha creado con el &quot;assistant editor&quot; y Ctrl+Arrastrar</span>
<span class="c1">//de la ventana del storyboard al editor con el código del view controller</span>
<span class="c1">//Elegimos Connection &quot;action&quot; y type &quot;UISlider&quot;</span>
<span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">cambiaSlider</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="bp">UISlider</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;El valor es: </span><span class="si">\(</span><span class="n">sender</span><span class="p">.</span><span class="n">value</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Es importante que al crear el <em>action</em>, si lo hacemos gráficamente con Ctrl+Arrastrar, en el <em>popup</em> de opciones elijamos como tipo <code>UISlider</code> (o en general, el tipo del control en cuestión). Así el parámetro <em>sender</em> que representa el objeto que ha generado el evento tendrá el tipo adecuado y no necesitaremos hacer un <em>cast</em> para acceder a la propiedad deseada, como pasaría si lo dejamos con tipo <code>Any</code>.</p>
</blockquote>
<h2 id="vistas-en-swift">Vistas en Swift<a class="headerlink" href="#vistas-en-swift" title="Permanent link">&para;</a></h2>
<blockquote>
<p>En la asignatura de Tecnologías de Desarrollo hemos creado componentes de interfaz de usuario (vistas) arrastrándolos al <em>storyboard</em>. Vamos a ver aquí cómo crearlos desde Swift y cambiar sus propiedades, que son las mismas que tenemos en Xcode.</p>
</blockquote>
<h3 id="las-vistas-y-el-controller">Las vistas y el controller<a class="headerlink" href="#las-vistas-y-el-controller" title="Permanent link">&para;</a></h3>
<p>Cada vista está íntimamente ligadas a un determinado <em>controller</em>. Podemos decir que un <em>controller</em> "posee" directamente una determinada vista, que es su vista principal, y esta a su vez puede contener subvistas. Toda esta jerarquía de vistas forman lo que el usuario percibe como una "pantalla" de nuestra <em>app</em>. </p>
<p>La vista "principal" de un <em>controller</em> es su propiedad <code>view</code>. El sitio indicado para manipular esta <code>view</code> es el método <code>viewDidLoad</code> del <em>controller</em> en cuestión. Este método se ejecuta una vez se ha cargado la vista y por tanto ya se han inicializado todos los componentes que hemos creado visualmente desde Xcode. En la plantilla creada por Xcode veremos que este método llama al de la clase base, al final del método podemos añadir nuestro código, por ejemplo para cambiar el color de fondo:</p>
<div class="highlight"><pre><span></span><code><span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
    <span class="c1">// Do any additional setup after loading the view.</span>
    <span class="c1">//aquí &quot;view&quot; ya estará inicializada, podemos cambiar sus propiedades</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">green</span>
<span class="p">}</span>
</code></pre></div>
<p>Otra opción es sobreescribir el método <code>loadView()</code> del <em>controller</em>, a diferencia del anterior, si existe este método se convierte en el responsable de cargar la vista principal, y se ignorará por tanto todo lo que se haya definido visualmente en el <em>storyboard</em>.</p>
<div class="highlight"><pre><span></span><code><span class="kr">override</span> <span class="kd">func</span> <span class="nf">loadView</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Somos responsables de crear &quot;view&quot;. </span>
    <span class="c1">//Aquí le damos el tamaño de la pantalla del dispositivo</span>
    <span class="c1">//En un momento detallaremos el uso de la propiedad &quot;frame&quot;</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">view</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="bp">UIScreen</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">bounds</span><span class="p">)</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="p">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">green</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="jerarquia-de-vistas">Jerarquía de vistas<a class="headerlink" href="#jerarquia-de-vistas" title="Permanent link">&para;</a></h3>
<p>Las vistas  nos proporcionan una serie de métodos para consultar y modificar la jerarquía. El método básico que necesitaremos es <code>addSubview</code>, que nos permitirá añadir una subvista a una vista determinada, que se convertirá en su vista "madre" o <em>supervista</em>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nv">label</span> <span class="p">=</span> <span class="bp">UILabel</span><span class="p">()</span>
<span class="n">label</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">&quot;Soy una etiqueta&quot;</span>
<span class="c1">//suponiendo que &quot;vista&quot; ya esté definida, ahora será la supervista de &quot;label&quot;</span>
<span class="n">vista</span><span class="p">.</span><span class="n">addSubView</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
</code></pre></div>
<p>Podemos eliminar una vista llamando a su método <code>removeFromSuperview()</code>. Podemos también consultar la jerarquía con los siguientes métodos:</p>
<ul>
<li><code>superview</code>: Nos da la vista padre de la vista destinataria del mensaje.</li>
<li><code>subviews</code>: Nos da la lista de subvistas de una vista dada.</li>
<li><code>isDescendantOfView:</code> Comprueba si una vista es descendiente de otra.</li>
</ul>
<p>Como vemos, una vista tiene una lista de vistas hijas. Cada vista hija tiene un índice, que determinará el orden en el que se dibujan. El índice 0 es el más cercano al observador, y por lo tanto tapará a los índices superiores. Podemos insertar una vista en un índice determinado de la lista de subvistas con <code>insertSubview(_:,at:)</code>.</p>
<p>Puede que tengamos una jerarquía compleja y necesitemos acceder desde el código a una determinada vista por ejemplo para inicializar su valor. Una opción es hacer un <em>outlet</em> para cada vista que queramos modificar, pero esto podría sobrecargar nuestro objeto de <em>outlets</em>. También puede ser complejo y poco fiable el buscar la vista en la jerarquía. En estos casos, lo más sencillo es darle a las vistas que buscamos una etiqueta (<em>tag</em>) mediante la propiedad <code>Tag</code> del inspector de atributos (debe ser un valor entero), o asignando la propiedad <code>tag</code> de forma programática. Podremos localizar en nuestro código una vista a partir de su etiqueta mediante <code>viewWithTag</code>. Llamando a este método sobre una vista, buscará entre todas las subvistas aquella con la etiqueta indicada:</p>
<div class="highlight"><pre><span></span><code> <span class="n">texto</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">viewWithTag</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>La jerarquía de vistas de una pantalla determinada de nuestra aplicación puede llegar a ser muy compleja. Es por eso que en Xcode hay una opción que nos permite mostrar un “despiece” visual en 3D de las vistas que componen la pantalla actual. Dicha opción está disponible en <code>Debug &gt; View Debugging</code>.En modo texto podemos usar la propiedad <code>recursiveDescription</code> para <a href="https://developer.apple.com/library/ios/technotes/tn2239/_index.html#//apple_ref/doc/uid/DTS40010638-CH1-SUBSECTION34">imprimir la descripción textual</a> de las vistas que contiene una vista dada.</p>
</blockquote>
<h3 id="propiedades-de-una-vista">Propiedades de una vista<a class="headerlink" href="#propiedades-de-una-vista" title="Permanent link">&para;</a></h3>
<p>A continuación vamos a repasar las propiedades básicas de las vistas, que podremos modificar tanto desde Xcode como de forma programática.</p>
<h4 id="disposicion">Disposición<a class="headerlink" href="#disposicion" title="Permanent link">&para;</a></h4>
<p>Entre las propiedades más importantes en las vistas encontramos aquellas referentes a su disposición en pantalla. Hemos visto que tanto cuando creamos la vista con Xcode como cuando la inicializamos de forma programática hay que especificar el <strong>marco (<code>frame</code>)</strong> que ocupará la vista en la pantalla. </p>
<p>Cuando se crea de forma visual, el marco se puede definir pulsando con el ratón sobre los márgenes de la vista y arrastrando para así mover sus límites. En el código estos límites se especifican mediante el tipo <code>CGRect</code>, en el que se especifica posición <code>(x,y)</code> de inicio, y el ancho y el alto que ocupa la vista. Estos datos se especifican en el sistema de coordenadas de la supervista.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nv">vista</span> <span class="p">=</span> <span class="bp">UIView</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="n">width</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="n">height</span><span class="p">:</span><span class="mi">100</span><span class="p">))</span>
</code></pre></div>
<p>El sistema de coordenadas tiene su origen en la esquina superior izquierda. Las coordenadas no se dan en <em>pixels</em>, sino en <strong>puntos</strong>, una medida que nos permite independizarnos de la resolución en pixels de la pantalla. Las coordenadas en puntos son reales, no enteras. Podéis consultar una <a href="http://www.ios-resolution.com">tabla muy completa</a> con muchos más datos. </p>
<blockquote>
<p>Otros frameworks de iOS definen sistemas de coordenadas distintos. Los de gráficos (Core Graphics y OpenGL ES) ponen el origen en la esquina inferior izquierda con el eje Y apuntando hacia arriba.</p>
</blockquote>
<p>Algunos ejemplos de cómo obtener la posición y dimensiones de una vista:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Limites en coordenadas locales</span>
<span class="c1">// Su origen siempre es (0,0)</span>
<span class="n">CGRect</span> <span class="n">areaLocal</span> <span class="p">=</span> <span class="n">vista</span><span class="p">.</span><span class="n">bounds</span>
<span class="c1">// Posición del centro de la vista en coordenadas de su supervista</span>
<span class="n">CGPoint</span> <span class="n">centro</span> <span class="p">=</span> <span class="n">vista</span><span class="p">.</span><span class="n">center</span>
<span class="c1">// Marco en coordenadas de la supervista</span>
<span class="n">CGRect</span> <span class="n">marco</span> <span class="p">=</span> <span class="n">vista</span><span class="p">.</span><span class="n">frame</span>
</code></pre></div>
<blockquote>
<p>Nótese que a partir de <code>bounds</code> y <code>center</code> podemos calcular <code>frame</code>, aunque nos lo da directamente el sistema</p>
</blockquote>
<p>Aquí estamos usando tamaños fijos para las coordenadas de <code>CGRect</code>. Sin embargo, en la mayoría de ocasiones nos interesa que el tamaño de las vistas no sea fijo sino que se adapte al área disponible. De esta forma nuestra interfaz podría adaptarse de forma sencilla a distintas orientaciones del dispositivo (horizontal o vertical) o a distintas resoluciones de la pantalla. Esto lo podemos conseguir mediante el uso del <strong>autolayout</strong>, que calcula de manera automática el <em>frame</em> de cada vista basándose en un conjunto de restricciones. Veremos esta tecnología en sesiones posteriores.</p>
<h4 id="transformaciones">Transformaciones<a class="headerlink" href="#transformaciones" title="Permanent link">&para;</a></h4>
<p>Podemos también aplicar una transformación a las vistas, mediante su propiedad <code>transform</code>. Por defecto las vistas tienen aplicada la transformación identidad <code>CGAffineTransform.identity</code>.</p>
<p>La transformación se define mediante una matriz de transformación 2D de dimensión 3x3. Podemos crear transformaciones sencillas (rotaciones, traslaciones o escalados “puros” con las funciones <code>CGAffineTransform(rotationAngle:)</code>, <code>CGAffineTransform(translationX:,y:)</code> y  <code>CGAffineTransform(scaleX:,y:)</code>.</p>
<blockquote>
<p>Si nuestra vista tiene aplicada una transformación diferente a la identidad, su propiedad <code>frame</code> no será significativa. En este caso sólo deberemos utilizar <code>center</code> y <code>bounds</code>.</p>
</blockquote>
<h4 id="otras-propiedades">Otras propiedades<a class="headerlink" href="#otras-propiedades" title="Permanent link">&para;</a></h4>
<p>En las vistas encontramos otras propiedades que nos permiten determinar su color o su opacidad. En primer lugar tenemos <code>backgroundColor</code>, con la que podemos fijar el color de fondo de una vista. En el inspector de atributos (sección <code>View</code>) podemos verlo como propiedad <code>Background</code>. El color de fondo puede ser transparente, o puede utilizarse como fondo un determinado patrón basado en una imagen.</p>
<p>De forma programática, el color se especifica mediante un objeto de clase <code>UIColor</code>. En esta clase podemos crear un color personalizado a partir de sus componentes (rojo, verde, azul, alpha), como en <code>UIColor(red:,green:,blue:,alpha:)</code> o con una constante predefinida (por ejemplo, <code>UIColor.green</code>)</p>
<p>Por otro lado, también podemos hacer que una vista tenga un cierto grado de transparencia, o esté oculta. A diferencia de <code>backgroundColor</code>, que sólo afecta al fondo de la vista, con la propiedad <code>alpha</code>, de tipo <code>CGFloat</code>, podemos controlar el nivel de transparencia de la vista completa con todo su contenido y sus subvistas. Si una vista no tiene transparencia, podemos poner su propiedad <code>opaque</code> a <code>true</code> para así optimizar la forma de dibujarla. Esta propiedad sólo debe establecerse a <code>true</code> si la vista llena todo su contendo y no deja ver nada del fondo. De no ser así, el resultado es impredecible. Debemos llevar cuidado con esto, ya que por defecto dicha propiedad es <code>true</code>.</p>
<p>Por último, también podemos ocultar una vista con la propiedad <code>isHidden</code>. Cuando hagamos que una vista se oculte, aunque seguirá ocupando su correspondiente espacio en pantalla, no será visible ni recibirá eventos.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Pie" >
      
      
        
        <a href="../ejercicios/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Ejercicios sobre vistas" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Ejercicios sobre vistas
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>